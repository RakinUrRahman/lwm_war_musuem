<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Book Visit — LWM</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="../../assets/css/lwm.css">
	<link rel="stylesheet" href="ticket.css">
	</head>
<body>
	<div class="app" id="app">
		<aside class="side" id="side">
			<div class="brand">
				<div class="logo">LWM</div>
				<div>
					<h1 style="font-size:20px">Digital Liberation War Museum</h1>
					<div class="muted" style="font-size:13px">Honoring Bangladesh's History</div>
				</div>
			</div>
			<nav id="nav" aria-label="Main menu"></nav>
		</aside>

		<div class="overlay" id="overlay"></div>

		<main class="main">
			<div class="topbar">
				<div style="display:flex;gap:12px;align-items:center">
					<button class="btn" id="hamb" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
					<div class="search" role="search">
						<i class="fas fa-search" aria-hidden="true"></i>
						<input id="globalSearch" placeholder="Search artifacts, stories, memorials..." aria-label="Search"/>
						<button class="btn" id="searchBtn" aria-label="Search button">Search</button>
					</div>
				</div>
				<div style="display:flex;gap:12px;align-items:center">
					<div id="userStatus" class="muted">Public Visitor</div>
					<div style="width:40px;height:40px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600">
						<span id="userInitials">PV</span>
					</div>
				</div>
			</div>

			<section class="content" id="page">
				<div class="container py-4 ticket-page">
					<div class="d-flex align-items-center justify-content-between mb-3">
						<div>
							<h2 class="mb-1"><i class="fas fa-ticket-alt me-2"></i>Book Your Visit</h2>
							<p class="muted mb-0">Plan your museum experience — pick a date and time, choose tickets, and you’re set.</p>
						</div>
						<div class="crowd-indicator" id="crowdIndicator" title="Estimated crowd level">
							<span class="dot"></span>
							<span class="label">Crowd: <strong id="crowdLevel">—</strong></span>
						</div>
					</div>

					<div class="ticket-grid">
						<div class="booking-form">
							<div class="card card-section">
								<div class="card-header">
									<h5 class="mb-0"><i class="far fa-calendar-check me-2"></i>Select Date & Time</h5>
								</div>
								<div class="card-body">
									<div class="row g-3 align-items-end">
										<div class="col-md-5">
											<label for="visitDate" class="form-label">Visit Date</label>
											<input type="date" class="form-control" id="visitDate"/>
										</div>
										<div class="col-md-7">
											<label class="form-label">Available Time Slots</label>
											<div class="slot-list" id="slotList" role="listbox" aria-label="Available time slots"></div>
										</div>
									</div>
								</div>
							</div>

							<div class="card card-section">
								<div class="card-header d-flex justify-content-between align-items-center">
									<h5 class="mb-0"><i class="fas fa-users me-2"></i>Tickets</h5>
									<small class="text-muted">Children under 5 are free</small>
								</div>
								<div class="card-body">
									<div class="ticket-type" data-type="adult">
										<div class="left">
											<div class="name">Adult</div>
											<div class="sub">Age 18–64</div>
										</div>
										<div class="price">৳ <span data-price="adult">500</span></div>
										<div class="qty">
											<button class="btn-qty" data-action="dec" aria-label="Decrease Adult">−</button>
											<span class="count" data-count="adult">0</span>
											<button class="btn-qty" data-action="inc" aria-label="Increase Adult">+</button>
										</div>
									</div>

									<div class="ticket-type" data-type="student">
										<div class="left">
											<div class="name">Student</div>
											<div class="sub">With valid ID</div>
										</div>
										<div class="price">৳ <span data-price="student">300</span></div>
										<div class="qty">
											<button class="btn-qty" data-action="dec" aria-label="Decrease Student">−</button>
											<span class="count" data-count="student">0</span>
											<button class="btn-qty" data-action="inc" aria-label="Increase Student">+</button>
										</div>
									</div>

									<div class="ticket-type" data-type="child">
										<div class="left">
											<div class="name">Child</div>
											<div class="sub">Age 5–17</div>
										</div>
										<div class="price">৳ <span data-price="child">200</span></div>
										<div class="qty">
											<button class="btn-qty" data-action="dec" aria-label="Decrease Child">−</button>
											<span class="count" data-count="child">0</span>
											<button class="btn-qty" data-action="inc" aria-label="Increase Child">+</button>
										</div>
									</div>

									<div class="ticket-type best" data-type="senior">
										<div class="left">
											<div class="name">Senior</div>
											<div class="sub">65+ years</div>
										</div>
										<div class="price">৳ <span data-price="senior">250</span></div>
										<div class="qty">
											<button class="btn-qty" data-action="dec" aria-label="Decrease Senior">−</button>
											<span class="count" data-count="senior">0</span>
											<button class="btn-qty" data-action="inc" aria-label="Increase Senior">+</button>
										</div>
										<div class="badge value">Best Value</div>
									</div>
								</div>
							</div>

							<div class="card card-section">
								<div class="card-header">
									<h5 class="mb-0"><i class="fas fa-id-card me-2"></i>Visitor Details</h5>
								</div>
								<div class="card-body">
									<div class="row g-3">
										<div class="col-md-4">
											<label for="fullName" class="form-label">Full Name</label>
											<input id="fullName" class="form-control" placeholder="Your name" />
										</div>
										<div class="col-md-4">
											<label for="email" class="form-label">Email</label>
											<input id="email" type="email" class="form-control" placeholder="you@example.com" />
										</div>
										<div class="col-md-4">
											<label for="phone" class="form-label">Phone</label>
											<input id="phone" class="form-control" placeholder="01XXXXXXXXX" />
										</div>
									</div>
								</div>
							</div>

							<div class="card card-section">
								<div class="card-header d-flex justify-content-between align-items-center">
									<h5 class="mb-0"><i class="fas fa-tags me-2"></i>Promo & Payment</h5>
									<small class="text-muted">Try: FREEDOM10 or MUKTI1971</small>
								</div>
								<div class="card-body">
									<div class="row g-3 align-items-end">
										<div class="col-md-6">
											<label for="promoCode" class="form-label">Promo Code</label>
											<div class="input-group">
												<input id="promoCode" class="form-control" placeholder="Enter code" />
												<button class="btn btn-outline-primary" id="applyPromo">Apply</button>
											</div>
											<div id="promoFeedback" class="promo-feedback" aria-live="polite"></div>
										</div>
										<div class="col-md-6">
											<label class="form-label">Payment Method</label>
											<div class="d-flex gap-3 flex-wrap">
												<div class="form-check">
													<input class="form-check-input" type="radio" name="payMethod" id="payCash" checked />
													<label class="form-check-label" for="payCash">Pay at Museum (Cash)</label>
												</div>
												<div class="form-check">
													<input class="form-check-input" type="radio" name="payMethod" id="payCard" disabled />
													<label class="form-check-label" for="payCard">Card (coming soon)</label>
												</div>
											</div>
										</div>
									</div>

									<div class="form-check mt-3">
										<input class="form-check-input" type="checkbox" id="agree" />
										<label class="form-check-label" for="agree">I agree to the museum’s terms and visitor guidelines.</label>
									</div>

									<div class="d-flex gap-2 mt-3">
															<button class="btn btn-outline-secondary" id="resetBooking" type="button"><i class="fas fa-undo me-1"></i>Reset</button>
															<button class="btn btn-primary" id="bookNow" type="button">
											<i class="fas fa-check me-1"></i>Book Now
										</button>
									</div>
								</div>
							</div>
						</div>

						<aside class="summary">
							<div class="summary-card">
								<div class="summary-header">
									<div>
										<div class="title">Booking Summary</div>
										<div class="when"><span id="summaryDate">—</span> • <span id="summarySlot">—</span></div>
									</div>
									<img src="../../logo.png" alt="LWM" class="summary-logo"/>
								</div>
								<div class="summary-items" id="summaryItems"></div>
								<div class="summary-row"><span>Subtotal</span><span>৳ <span id="subtotal">0</span></span></div>
								<div class="summary-row"><span>VAT (5%)</span><span>৳ <span id="tax">0</span></span></div>
								<div class="summary-row discount d-none" id="discountRow"><span>Discount</span><span>− ৳ <span id="discount">0</span></span></div>
								<div class="summary-total"><span>Total</span><span>৳ <span id="total">0</span></span></div>
								<div class="summary-note">Free entry for children under 5. Student tickets require a valid ID at entry.</div>
							</div>

							<div class="tips">
								<div class="tip"><i class="fas fa-lightbulb"></i> Early slots are calmer and best for families.</div>
								<div class="tip"><i class="fas fa-shield-alt"></i> Security check applies at the entrance.</div>
							</div>
						</aside>
					</div>
				</div>

				<div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
					<div class="modal-dialog modal-lg modal-dialog-centered">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title"><i class="fas fa-check-circle text-success me-2"></i>Booking Confirmed</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<div class="row g-3">
									<div class="col-md-7">
										<canvas id="ticketCanvas" class="ticket-canvas" width="720" height="360" aria-label="Your Ticket"></canvas>
										<div class="d-flex gap-2 mt-2">
											<button class="btn btn-outline-secondary" id="printTicket"><i class="fas fa-print me-1"></i>Print</button>
											<button class="btn btn-outline-primary" id="downloadTicket"><i class="fas fa-download me-1"></i>Download PNG</button>
										</div>
									</div>
									<div class="col-md-5">
										<div class="confirm-details">
											<div><strong>Booking ID:</strong> <span id="confId">—</span></div>
											<div><strong>Name:</strong> <span id="confName">—</span></div>
											<div><strong>Date & Time:</strong> <span id="confWhen">—</span></div>
											<div><strong>Tickets:</strong> <span id="confTickets">—</span></div>
											<div><strong>Total Paid:</strong> ৳ <span id="confTotal">0</span></div>
											<hr/>
											<div class="muted small">Show this ticket (digital or print) at the entrance. Arrive 10 minutes early.</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<footer>© <strong>Digital Liberation War Museum</strong> — Honoring the Sacrifices of 1971 • Prototype v2.0</footer>
		</main>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="../../shared/core.js"></script>
	<script src="ticket.js"></script>
</body>
</html>
